<!-- Include Header -->
<%- include('../admin-partials/header') %>

  <link rel="stylesheet" href="/css/admin_css/customers.css">
  <link rel="stylesheet" href="/css/admin_css/customer-modal.css">

  <title>Customers - Aniyara</title>
  <!-- Customers Page -->



  <div id="customers-page" class="main-content page hidden-pages">
    <div class="header">
      <h1 class="page-title">Customers Management</h1>
      <div class="search-bar">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#64748b"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input type="text" placeholder="Search customers...">
      </div>
    </div>

    <div class="filters">
      <div class="filter-group">
        <select class="filter-select">
          <option>All Customers</option>
          <option>New Customers</option>
          <option>Returning Customers</option>
          <option>VIP Customers</option>
        </select>
        <select class="filter-select">
          <option>Sort By: Date Joined</option>
          <option>Sort By: Total Spent</option>
          <option>Sort By: Orders Count</option>
          <option>Sort By: Name (A-Z)</option>
        </select>
      </div>
      <button class="btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Add New Customer
      </button>
    </div>

    <% users.forEach(user=> { %>
      <div class="customer-card">
        <img src="/api/placeholder/60/60" alt="Customer" class="customer-avatar">
        <div class="customer-info">
          <h3 class="customer-name">
            <%= user.name %>
          </h3>
          <div class="customer-email">
            <%= user.email %>
          </div>
          <div class="customer-stats">
            <div>Total Orders: 2</div>
            <div>Total Spent: $200000</div>
            <div>Member Since: <%= user.createdAt.toDateString() %>
            </div>
          </div>
        </div>
        <div class="customer-actions">

          <!-- view button -->
          <button class="btn btn-sm" data-id="<%= user._id %>" data-name="<%= user.name %>" user
            data-email="<%= user.email %>">View </button>

          <!-- edit button -->
          <button class="btn btn-sm btn-secondary" data-id="<%= user._id %>" data-name="<%= user.name %>"
            data-email="<%= user.email %>">
            Edit
          </button>
        </div>
      </div>
      <% }) %>



        <div class="pagination">
          <a href="#" class="pagination-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </a>
          <a href="#" class="pagination-item active">1</a>
          <a href="#" class="pagination-item">2</a>
          <a href="#" class="pagination-item">3</a>
          <a href="#" class="pagination-item">4</a>
          <a href="#" class="pagination-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </a>
        </div>
  </div>




  <!-- Include modal -->

  <%- include('../admin/customer-modal') %>

    <!-- Add this to your CSS for notifications -->
    <style>
      .notification {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: var(--white);
        border-radius: 6px;
        padding: var(--spacing-md) var(--spacing-lg);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        z-index: 1100;
        min-width: 300px;
        animation: slideIn 0.3s ease-out forwards;
      }

      .notification-content {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .notification.success .notification-content svg {
        color: #16A34A;
      }

      .notification-close {
        background: none;
        border: none;
        color: var(--secondary);
        cursor: pointer;
        padding: 4px;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }

        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    </style>


    <script src="/js/admin_js/customer.js"></script>
    <script>

      document.querySelectorAll('.view-btn').forEach(button => {
        button.addEventListener('click', function () {
          const name = this.dataset.name;
          const email = this.dataset.email;

          // Fill modal fields
          document.getElementById('viewName').innerText = name;
          document.getElementById('viewEmail').innerText = email;

          // Show modal
          const modal = new bootstrap.Modal(document.getElementById('viewModal'));
          modal.show();
        });
      });

      document.querySelectorAll('.edit-btn').forEach(button => {
        button.addEventListener('click', function () {
          const id = this.dataset.id;
          const name = this.dataset.name;
          const email = this.dataset.email;

          // Fill modal form fields
          document.getElementById('editName').value = name;
          document.getElementById('editEmail').value = email;
          document.getElementById('userId').value = id;

          // Show modal
          const modal = new bootstrap.Modal(document.getElementById('editModal'));
          modal.show();
        });
      });
    </script>





    <!-- Include Footer -->
    <%- include('../admin-partials/footer') %>